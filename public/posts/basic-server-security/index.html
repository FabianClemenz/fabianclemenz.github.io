<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Basic Server Security · Fabian Clemenz
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Fabian Clemenz">
<meta name="description" content="This article shows which basics should be applied to every sever installation, before even start installing software on it">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Basic Server Security">
  <meta name="twitter:description" content="This article shows which basics should be applied to every sever installation, before even start installing software on it">

<meta property="og:url" content="//localhost:1313/posts/basic-server-security/">
  <meta property="og:site_name" content="Fabian Clemenz">
  <meta property="og:title" content="Basic Server Security">
  <meta property="og:description" content="This article shows which basics should be applied to every sever installation, before even start installing software on it">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-11-20T08:55:34+01:00">
    <meta property="article:modified_time" content="2025-11-20T08:55:34+01:00">
    <meta property="article:tag" content="Server">
    <meta property="article:tag" content="Security">
    <meta property="article:tag" content="Ubuntu">
    <meta property="article:tag" content="Ssh">
    <meta property="article:tag" content="Firewall">
    <meta property="article:tag" content="Sudo">




<link rel="canonical" href="//localhost:1313/posts/basic-server-security/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="//localhost:1313/">
      Fabian Clemenz
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="//localhost:1313/posts/basic-server-security/">
              Basic Server Security
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2025-11-20T08:55:34&#43;01:00">
                November 20, 2025
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              6-minute read
            </span>
          </div>
          <div class="authors">
  <i class="fa-solid fa-user" aria-hidden="true"></i>
    <a href="/authors/fabian-clemenz/">Fabian Clemenz</a></div>

          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/infrastructure/">Infrastructure</a>
      <span class="separator">•</span>
    <a href="/categories/security/">Security</a>
      <span class="separator">•</span>
    <a href="/categories/101/">101</a></div>

          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/server/">Server</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/security/">Security</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/ubuntu/">Ubuntu</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/ssh/">Ssh</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/firewall/">Firewall</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/sudo/">Sudo</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <h4 id="or-the-best-door-is-useless-if-the-key-is-left-init">
  <em>or: The best door is useless if the key is left in it</em>
  <a class="heading-link" href="#or-the-best-door-is-useless-if-the-key-is-left-init">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>This article was first published on our company website. <a href="https://devsuit.de/ueber-uns/aktuelles/basic-server-security"  class="external-link" target="_blank" rel="noopener">https://devsuit.de/ueber-uns/aktuelles/basic-server-security</a></p>
<p>If you just want the commands - scroll to the <a href="#tldr" >TL;DR</a> section at the end of the artcile.
Most of the time, I would recommend using Docker and direct container hosting (such as DigitalOcean App Platform), but in some cases you still need a good old-fashioned server. Celery, to name just one example, cannot be used on the DigitalOcean App Platform (as of <strong>November 7, 2025</strong>).</p>
<p>When you reach the point where you need a server, or you&rsquo;re tasked with maintaining an old one, you should know a few basic steps to secure it. You can spend countless hours securing your applications, but if the server itself lacks basic security, it&rsquo;s like leaving the key in your front door.
Here are the basic steps we take on every server.</p>
<p><strong>Disclaimer</strong>: This guide applies to Ubuntu Server starting from version 24.04. Most commands should also work on older versions and other operating systems.</p>
<h2 id="create-users">
  Create Users
  <a class="heading-link" href="#create-users">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Access to the server should always be done via dedicated users and never through centralized accounts or, even worse, the root user. There are two simple reasons for this:</p>
<ol>
<li>If a user is compromised, that user&rsquo;s access can be revoked.</li>
<li>You can track which user made which changes.</li>
</ol>
<p>A user is created using <code>sudo adduser &lt;username&gt; --force-badname</code>. You will be asked to set a password, which you definitely should do. The <code>--force-badname</code> flag is required when the username contains special characters such as dots.
Afterwards, add the user to the <strong>sudo</strong> group so they can execute commands as an administrator: <code>sudo usermod -aG sudo &lt;username&gt;</code>.</p>
<p>As a rule, access should only be possible via SSH keys. To do this, store the public SSH key in the user account. Switch to the newly created user with <code>sudo su &lt;username&gt;</code> and create the <code>.ssh</code> directory in their home folder (<code>mkdir ~/.ssh</code>).
Inside this directory, create the <code>authorized_keys</code> file, which will contain the public key. The command is: <code>cd ~/.ssh &amp;&amp; nano authorized_keys</code>. Enter the public key there and save the file.
Finally, set the correct permissions on the <code>.ssh</code> folder and the <code>authorized_keys</code> file using: <code>chmod 700 ~/.ssh &amp;&amp; chmod 600 ~/.ssh/authorized_keys</code>.</p>
<p>Repeat this process for every user who should have access to the server.</p>
<h2 id="sudo-command-only-with-apassword">
  Sudo command only with a password
  <a class="heading-link" href="#sudo-command-only-with-apassword">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>To ensure that the <strong>sudo</strong> command can only be used with a password - which adds an extra layer of security - a configuration file must be created. This is done using: <code>sudo nano /etc/sudoers.d/10-default-user-config</code>. For each user account, add an entry following this pattern: <code>&lt;username&gt; ALL=(ALL) ALL</code>. This ensures that the user is asked for their password the first time they use the sudo command in a session.</p>
<p><strong>Important:</strong> Only users who have SSH access may be included in this file.</p>
<h2 id="secure-ssh">
  Secure SSH
  <a class="heading-link" href="#secure-ssh">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>After the users have been created, SSH itself is secured. As mentioned earlier, we want to prevent access for the root user while also allowing login only via keys. In addition, it&rsquo;s a good idea to change the SSH port (preferably to a port &gt; 1024). This does not prevent attacks, but it makes them more difficult.</p>
<p>To do this, create a configuration file for SSH using: <code>cd /etc/ssh/sshd_config.d &amp;&amp; sudo nano 10-custom-ssh.conf</code>.</p>
<p>We use the following configuration:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Port &lt;SSH Port&gt;
</span></span><span style="display:flex;"><span>PermitRootLogin no <span style="color:#8b949e;font-style:italic"># Disables root login</span>
</span></span><span style="display:flex;"><span>PasswordAuthentication no <span style="color:#8b949e;font-style:italic"># Disables login with password</span>
</span></span><span style="display:flex;"><span>IgnoreRhosts yes <span style="color:#8b949e;font-style:italic"># deactivates old RSH protocol</span>
</span></span></code></pre></div><p>Since Ubuntu <strong>22.04</strong>, SSH uses sockets, so the port must be adjusted there as well. To do this, open the file with <code>sudo nano /lib/systemd/system/ssh.socket</code> and replace every instance of <strong>22</strong> with the previously chosen SSH port.</p>
<p>SSH shoudl then be restarted using: <code>sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart ssh</code>.</p>
<p>After logging out, you can only log in using the user accounts that were created.</p>
<h2 id="deactivate-the-rootshell">
  Deactivate the root shell
  <a class="heading-link" href="#deactivate-the-rootshell">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>To prevent a user from switching to the root shell and executing commands there, the root shell is disabled. To do this, open the necessary configuration with <code>sudo nano /etc/passwd</code> and change <code>/bin/bash</code> to <code>/usr/sbin/nologin</code> in the line where <code>root</code> appears.</p>
<p>This prevents a user from switching to the root shell using <code>su root</code>. Any attempt to switch to the root shell will be logged.</p>
<h2 id="firewall">
  Firewall
  <a class="heading-link" href="#firewall">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>In the final step, a firewall is activated so that only the ports that are actually needed remain open. This way, any access attempts to other ports are immediately blocked by the firewall. We use <strong>ufw</strong> as the firewall.
Using <code>sudo ufw default deny incoming</code> and s<code>udo ufw default allow outgoing</code>, we block all incoming traffic by default and allow outgoing traffic.</p>
<p>Next, the SSH port needs to be reopened with <code>sudo ufw allow &lt;SSH Port&gt;</code>. This must not be forgotten, otherwise SSH access will stop working as soon as the firewall is activated. Additional ports are opened following the same pattern.</p>
<p>Finally, the firewall is activated with <code>sudo ufw enable</code>.</p>
<h2 id="conclusion">
  Conclusion
  <a class="heading-link" href="#conclusion">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>With this short guide, a server is fundamentally secured. Additional configurations and hardening measures must be evaluated and implemented based on specific requirements.</p>
<h2 id="tldr">
  TL;DR
  <a class="heading-link" href="#tldr">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>For anyone who just wants a quick, simple guide.</p>
<h3 id="create-users-1">
  Create Users
  <a class="heading-link" href="#create-users-1">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li><code>sudo adduser &lt;username&gt; --force-badname</code> → adds the account</li>
<li><code>sudo usermod -aG sudo &lt;username&gt;</code> → adds the account to the sudo group</li>
<li><code>sudo su &lt;username&gt; &amp;&amp; mkdir ~/.ssh</code> → switches to the created account and creates an <code>.ssh</code> directory in its home directory</li>
<li><code>cd ~/.ssh &amp;&amp; nano authorized_keys</code> → switches to the <code>.ssh</code> directory and opens the <code>authorized_keys</code> file. The user&rsquo;s public key is entered in this file.</li>
<li><code>chmod 700 ~/.ssh &amp;&amp; chmod 600 ~/.ssh/authorized_keys</code> → sets the appropriate permissions</li>
</ol>
<p>Repeat steps 1–5 for every other user.</p>
<h3 id="sudo-command-only-with-apassword-1">
  Sudo command only with a password
  <a class="heading-link" href="#sudo-command-only-with-apassword-1">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li><code>sudo nano /etc/sudoers.d/10-default-user-config</code> → creates a new sudoers configuration</li>
<li><code>&lt;username&gt; ALL=(ALL) ALL</code> → add this line for each user</li>
</ol>
<p>Only accounts which are allowed to use ssh may be included in this file!</p>
<h3 id="secure-ssh-1">
  Secure SSH
  <a class="heading-link" href="#secure-ssh-1">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li><code>cd /etc/ssh/sshd_config.d &amp;&amp; sudo nano 10-custom-ssh.conf</code> → creates an SSH configuration with the following content:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Port &lt;SSH Port&gt;
</span></span><span style="display:flex;"><span>PermitRootLogin no <span style="color:#8b949e;font-style:italic"># Disables root login</span>
</span></span><span style="display:flex;"><span>PasswordAuthentication no <span style="color:#8b949e;font-style:italic"># Disables login with password</span>
</span></span><span style="display:flex;"><span>IgnoreRhosts yes <span style="color:#8b949e;font-style:italic"># deactivates old RSH protocol</span>
</span></span></code></pre></div><p>Since Ubuntu <strong>22.04</strong>, SSH uses sockets. To change the port there as well, do the following:</p>
<ol>
<li><code>sudo nano /lib/systemd/system/ssh.socket</code></li>
<li><code>Change ListenStream=0.0.0.0:22</code> to <code>ListenStream=0.0.0.0:&lt;SSH Port&gt;</code></li>
<li><code>Change ListenStream=[::]:22</code> to <code>ListenStream=[::]:&lt;SSH Port&gt;</code></li>
</ol>
<p>Restart SSH using: <code>sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart ssh</code></p>
<p>Then log out and log back in with one of the created accounts to verify that everything works.</p>
<h3 id="deactivate-the-rootshell-1">
  Deactivate the root shell
  <a class="heading-link" href="#deactivate-the-rootshell-1">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li><code>sudo nano /etc/passwd</code> -&gt; opens the configuration</li>
<li>Change <code>/bin/bash</code> to <code>/usr/sbin/nologin</code> in the line which starts with root</li>
</ol>
<h3 id="firewall-1">
  Firewall
  <a class="heading-link" href="#firewall-1">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li><code>sudo ufw default deny incoming</code> → block incoming traffic by default</li>
<li><code>sudo ufw default allow outgoing</code> → allow outgoing traffic by default</li>
<li><code>sudo ufw allow &lt;SSH Port&gt;</code> → allow SSH</li>
<li><code>sudo ufw allow &lt;port&gt;</code> → open additional ports (if necessary)</li>
<li><code>sudo ufw enable</code> → activates the firewall. <strong>IMPORTANT:</strong> The SSH port must be opened beforehand, otherwise access to the server will no longer be possible.</li>
</ol>

      </div>


      <footer>
        

<section class="see-also">
  
    
    
    
  
</section>


        
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2023 -
    
    2025
     Fabian Clemenz 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
